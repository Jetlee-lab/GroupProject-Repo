import{v as o,S as m,p as g,q as u,o as j,j as s,L as p}from"./index-CKQpsmit.js";import{u as d,f as N,a as b}from"./api-PUEqmf_P.js";function f({issues:t}){const l=t.filter(e=>e.status==o),a=t.filter(e=>e.status==m);return t.filter(e=>e.status==g),t.filter(e=>e.status==u),t.filter(e=>e.status==j),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-blue-600 text-white p-4 rounded-lg shadow-lg",children:[s.jsx("h2",{className:"text-xl",children:"In review Issues"}),s.jsx("p",{className:"text-3xl",children:a.length})]}),s.jsxs("div",{className:"bg-green-600 text-white p-4 rounded-lg shadow-lg",children:[s.jsx("h2",{className:"text-xl",children:"Resolved Issues"}),s.jsx("p",{className:"text-3xl",children:l.length})]}),s.jsxs("div",{className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg",children:[s.jsx("h2",{className:"text-xl",children:"Total Issues"}),s.jsx("p",{className:"text-3xl",children:t.length})]})]})}function y({issues:t,users:l}){return s.jsx("div",{className:"overflow-auto",children:s.jsxs("table",{className:"min-w-full hover:bg-gray-100 table-auto",children:[s.jsx("thead",{className:"bg-blue-700  text-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"ISSUE ID"}),s.jsx("th",{className:"px-4 py-2",children:"Student"}),s.jsx("th",{className:"px-4 py-2",children:"Issue"}),s.jsx("th",{className:"px-4 py-2",children:"Status"}),s.jsx("th",{className:"px-4 py-2",children:"Date"}),s.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),s.jsx("tbody",{children:t.map(a=>{var e;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2",children:a.id}),s.jsx("td",{className:"px-4 py-2",children:((e=l.filter(r=>a.owner==r.id)[0])==null?void 0:e.email)||"annon."}),s.jsx("td",{className:"px-4 py-2",children:a.issue}),s.jsx("td",{className:"px-4 py-2",children:a.status}),s.jsx("td",{className:"px-4 py-2",children:a.created_at}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",children:"View"})})]},a.id)})})]})})}function S(){const t=[{id:1,action:"Resolved issue #3 Mulungi Martha",time:"2025-04-01 09:45 AM"},{id:2,action:"New issue logged by Nakato Mary",time:"2025-03-30 03:30 PM"}];return s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold ",children:"Recent Activity"}),s.jsx("ul",{children:t.map(l=>s.jsxs("li",{className:" py-2",children:[s.jsx("p",{className:"text-gray-700",children:l.action}),s.jsx("p",{className:"text-sm text-gray-500",children:l.time})]},l.id))})]})}function w(){const{isLoading:t,isFetching:l,error:a,data:e}=d(N),{isLoading:r,isFetching:n,error:c,data:x}=d(b);if(l||n)return s.jsx(s.Fragment,{children:"Fetching issues..."});if(t||r)return s.jsx(s.Fragment,{children:"Loading data..."});if(a||c)return s.jsx(s.Fragment,{children:"Ops something happend!"});const i=e.data,h=x.data;return s.jsxs("div",{className:"p-4",children:[s.jsx("h2",{className:"text-2xl text-center font-bold mb-4",children:"ACADEMIC REGISTRAR DASHBOARD"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:s.jsx(f,{issues:i})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xl text-center font-semibold",children:"ISSUE MANAGEMENT"}),s.jsx(y,{issues:i,users:h}),s.jsx("div",{className:"mt-4 text-left",children:s.jsx(p,{to:"/registrar-reports",children:s.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"View and Assign Issues"})})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl text-center font-semibold mb-4",children:"RECENT ACTIVITY"}),s.jsx(S,{})]})]})}export{w as default};
